<div class="messenger-container h-full flex flex-col">
  @if (!connectionStatus()) {
    <div class="connection-status p-2">
      <p-tag severity="danger" value="Connection Lost - Attempting to reconnect..." icon="pi pi-exclamation-triangle"></p-tag>
    </div>
  }
  <div class="chat-content flex-1 flex">
    <!-- Chat List - Full width on mobile/tablet, side panel on desktop -->
    <div class="chat-list border-r"
         [class.hidden]="isMobileOrTablet() && showChatWindow()"
         [class.w-full]="isMobileOrTablet()"
         [class]="isDesktop() ? 'w-1/3' : ''">
      <app-chat-list 
        [conversations]="conversations()"
        [(selectedConversationId)]="conversationService.selectedConversationId"
        [(previousConversationId)]="conversationService.previousConversationId">
      </app-chat-list>
    </div>
    <!-- Chat Window - Full width on mobile/tablet when shown, main area on desktop -->
    <div class="chat-window flex-1"
         [class.hidden]="isMobileOrTablet() && !showChatWindow()">
      <app-chat-window 
        [conversation]="conversationService.selectedConversation()"
        [user]="user()"
        (backToList)="onBackToList()"
        (messageSent)="onMessageSent($event)">
      </app-chat-window>
    </div>
  </div>
</div>
